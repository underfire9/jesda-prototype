(function(t){function e(e){for(var i,r,o=e[0],l=e[1],c=e[2],u=0,m=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&m.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);d&&d(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},s={formEditor:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;n.push([1,"chunk-vendors"]),a()})({"00ff":function(t,e,a){},1:function(t,e,a){t.exports=a("55f5")},"54b1":function(t,e,a){"use strict";a("00ff")},"55f5":function(t,e,a){"use strict";a.r(e);a("7db0"),a("a434"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"form_editor"}},[a("button",{staticClass:"btn btn-primary btn-sm waves-effect waves-light form_editor_save",attrs:{type:"button"},on:{click:t.saveEditor}},[t._v("儲存")]),a("div",{staticClass:"row form_editor_row"},[a("div",{staticClass:"side_element"},[a("ul",{staticClass:"nav nav-tabs mb-0 form_edite_nav"},[a("li",{staticClass:"nav-item",on:{click:function(e){return t.changeContnet("insert")}}},[a("a",{staticClass:"nav-link",class:{active:"insert"==t.contentType}},[t._v("新增欄位")])]),t.defaultEditContents.length>0?a("li",{staticClass:"nav-item",on:{click:function(e){return t.changeContnet("edit")}}},[a("a",{staticClass:"nav-link",class:{active:"edit"==t.contentType}},[t._v("現有欄位")])]):t._e()]),a("div",{staticClass:"col-block side_element_block"},["insert"==t.contentType?a("div",{staticClass:"block-content"},[a("div",{staticClass:"mt-0 md-form md-outline input-with-post-icon search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchWords,expression:"searchWords"}],staticClass:"form-control rounded",attrs:{type:"search",placeholder:"搜尋元件","aria-label":"Search","aria-describedby":"search-addon"},domProps:{value:t.searchWords},on:{input:function(e){e.target.composing||(t.searchWords=e.target.value)}}}),a("i",{staticClass:"fa fa-search input-prefix"})]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.insertType,expression:"insertType"}],staticClass:"md-form md-outline browser-default custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.insertType=e.target.multiple?a:a[0]}}},[t._l(t.insertTypeList,(function(e,i){return a("option",{key:"type_"+i,domProps:{value:e.value}},[t._v(t._s(e.label))])})),t.cbData.dev?a("option",{attrs:{value:"defaultItem"}},[t._v("固定欄位")]):t._e()],2),t._m(0),a("draggable",{staticClass:"dragArea list-group insert-area",attrs:{list:t.filterInsertContents,group:{name:"editor",pull:"clone",put:!1},clone:t.onClone,sort:!1,draggable:".addable"},on:{change:t.log,start:t.onDragStart,end:t.onDragEnd}},t._l(t.filterInsertContents,(function(e,i){return a("div",{key:"filterInsert_"+i,staticClass:"list-group-item",class:{addable:0!=e.addable,disabled:0==e.addable}},[a("div",{staticClass:"list-group-inner"},[a("div",{staticClass:"group-hd"},[a("i",{staticClass:"fa",class:{"fa-cog":0!=e.addable&&"default"==e.insertType,"icon-repect":0!=e.addable&&"default"!=e.insertType,"fa-lock":0==e.addable}}),a("span",[t._v(t._s(e.label.CH))])]),e.insertDes?a("span",{staticClass:"tooltip-area",attrs:{"data-toggle":"tooltip",title:e.insertDes}}):t._e()])])})),0)],1):a("div",{staticClass:"block-content"},[a("div",{staticClass:"mt-0 md-form md-outline input-with-post-icon search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchWords,expression:"searchWords"}],staticClass:"form-control rounded",attrs:{type:"search",placeholder:"搜尋元件","aria-label":"Search","aria-describedby":"search-addon"},domProps:{value:t.searchWords},on:{input:function(e){e.target.composing||(t.searchWords=e.target.value)}}}),a("i",{staticClass:"fa fa-search input-prefix"})]),a("draggable",{staticClass:"dragArea list-group insert-area",attrs:{list:t.filterEditContents,group:{name:"editor",pull:"clone",put:!1},clone:t.onClone,sort:!1,draggable:".addable"},on:{change:t.log,start:t.onDragStart,end:t.onDragEnd}},t._l(t.filterEditContents,(function(e,i){return a("div",{key:"filterEdit_"+i,staticClass:"list-group-item",class:{addable:0!=e.addable,disabled:0==e.addable}},[a("div",{staticClass:"list-group-inner"},[a("div",{staticClass:"group-hd"},[a("i",{staticClass:"fa fa-cog"}),a("span",[t._v(t._s(e.label.CH))])]),e.insertDes?a("span",{staticClass:"tooltip-area",attrs:{"data-toggle":"tooltip",title:e.insertDes}}):t._e()])])})),0)],1)])]),a("div",{staticClass:"edit_area"},[a("ul",{staticClass:"nav nav-tabs mb-0 form_edite_nav"},t._l(t.enumData.langs,(function(e){return a("li",{key:"nav_"+e.key,staticClass:"nav-item",on:{click:function(a){return t.changeI18n(e.key)}}},[a("a",{staticClass:"nav-link",class:{active:t.i18n==e.key}},[t._v(t._s(e.label))])])})),0),a("draggable",{staticClass:"edit-container",on:{change:t.log},model:{value:t.defaultContents,callback:function(e){t.defaultContents=e},expression:"defaultContents"}},t._l(t.defaultContents,(function(e,i){return a("div",{key:"div_"+i,staticClass:"col-block edit_area_block"},[a("div",{staticClass:"block-header has-border",on:{dblclick:function(a){return t.editContent(e)}}},[a("h3",[a("strong",[t._v(t._s(e.label[t.i18n]))]),e.des&&e.des[t.i18n]?a("small",{staticClass:"form-text text-muted"},[t._v(t._s(e.des[t.i18n]))]):t._e()]),t.checkDivRemoveAble(e.items)?a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeAt(i)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]):a("button",{staticClass:"close btn-light",attrs:{type:"button","aria-label":"Close",title:"區塊內含有無法刪除之元件"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"block-content"},[a("form",[a("draggable",{staticClass:"dragArea list-group",attrs:{list:e.items,group:"editor"},on:{change:t.log,add:function(e){return t.onAdd(i,e)}}},t._l(e.items,(function(e,s){return a("div",{key:"item_"+s,staticClass:"form-group dragDiv",class:{"edit-active":e.editorEnable},on:{dblclick:function(a){return t.editContent(e,i,s)}}},[e.editorEnable&&0!=e.setting.removeable?a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeAt(i,s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])]):t._e(),e.setting&&e.setting.require?a("span",{staticClass:"form-request"},[t._v("*")]):t._e(),"des"!=e.type&&0!=e.setting.showTitle?a("label",{attrs:{for:"content"+i+"_"+s}},[t._v(t._s(e.label[t.i18n]))]):t._e(),e.des&&e.des[t.i18n]&&0!=e.setting.showDes&&1==e.setting.showDesOnTop?a("small",{staticClass:"form-text text-muted"},[t._v(t._s(e.des[t.i18n]))]):t._e(),"des"==e.type?a("div",{domProps:{innerHTML:t._s(e.content[t.i18n])}}):"text"==e.type?a("input",{staticClass:"form-control",class:e.setting.width||"col-md-12",attrs:{id:"content"+i+"_"+s,minlength:e.setting.min,maxlength:e.setting.max,placeholder:e.setting.placeholder&&e.setting.placeholder[t.i18n]},domProps:{value:e.value&&e.value[t.i18n]}}):"textarea"==e.type?a("textarea",{staticClass:"form-control",class:e.setting.width||"col-md-12",attrs:{id:"content"+i+"_"+s,minlength:e.setting.min,maxlength:e.setting.max,rows:e.setting.rows,placeholder:e.setting.placeholder&&e.setting.placeholder[t.i18n]},domProps:{value:e.value&&e.value[t.i18n]}}):t._e(),"email"==e.type?a("input",{staticClass:"form-control",class:e.setting.width||"col-md-12",attrs:{type:"email",id:"content"+i+"_"+s,placeholder:e.setting.placeholder&&e.setting.placeholder[t.i18n]},domProps:{value:e.value&&e.value[t.i18n]}}):t._e(),"number"==e.type?a("input",{staticClass:"form-control",class:e.setting.width||"col-md-12",attrs:{type:"number",id:"content"+i+"_"+s,min:e.setting.min,max:e.setting.max,step:e.setting.step,placeholder:e.setting.placeholder&&e.setting.placeholder[t.i18n]},domProps:{value:e.value}}):"datepicker"==e.type?a("div",{staticClass:"row"},[a("div",{class:e.setting.width||"col-md-12"},[a("datepicker",{attrs:{value:e.date,placeholder:e.setting.placeholder&&e.setting.placeholder[t.i18n]}})],1)]):"datetimepicker"==e.type?a("div",{staticClass:"row"},[a("div",{class:e.setting.width||"col-md-12"},[a("datetimepicker",{attrs:{value:e.datetime,placeholder:e.setting.placeholder&&e.setting.placeholder[t.i18n]}})],1)]):"select"==e.type?a("select",{staticClass:"browser-default custom-select",class:e.setting.width||"col-md-12",attrs:{id:"content"+i+"_"+s}},t._l(e.options,(function(e,i){return a("option",{key:"下拉選項_"+i,domProps:{value:e.value}},[t._v(t._s(e.label[t.i18n]))])})),0):"radio"==e.type?a("div",{class:e.setting.width||"col-md-12"},t._l(e.options,(function(i,n){return a("div",{key:"單選項目_"+n,staticClass:"form-check",class:{"form-inline":!e.setting.inline,"custom-control-inline":e.setting.inline,"mb-2":i.des}},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",id:"option_radio_"+s+"_"+n,name:"radio_"+s},domProps:{value:i.value}}),a("label",{staticClass:"form-check-label",attrs:{for:"option_radio_"+s+"_"+n}},[t._v(t._s(i.label[t.i18n]))]),i.des?a("input",{staticClass:"form-control form-control-sm ml-2",attrs:{type:"text",placeholder:i.placeholder[t.i18n]}}):t._e()])})),0):"checkbox"==e.type?a("div",{class:e.setting.width||"col-md-12"},t._l(e.options,(function(i,n){return a("div",{key:"複選項目_"+n,staticClass:"form-check",class:{"form-inline":!e.setting.inline,"custom-control-inline":e.setting.inline,"mb-2":i.des}},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"option_checkbox_"+s+"_"+n,name:"checkbox_"+s},domProps:{value:i.value}}),a("label",{staticClass:"form-check-label",attrs:{for:"option_checkbox_"+s+"_"+n}},[t._v(t._s(i.label[t.i18n]))]),i.des?a("input",{staticClass:"form-control form-control-sm ml-2",attrs:{type:"text",placeholder:i.placeholder[t.i18n]}}):t._e()])})),0):"file_upload"==e.type?a("div",[a("input",{staticClass:"form-control-file disable-click",staticStyle:{display:"none"},attrs:{accept:"."+e.setting.accept.join(",."),type:"file"}}),e.file?a("button",{staticClass:"ml-0 btn btn-xs btn-success waves-effect waves-light",attrs:{type:"button"},on:{click:function(a){return t.downloadFile(e.file)}}},[t._v("範本")]):t._e(),a("button",{staticClass:"ml-0 btn btn-xs btn-primary waves-effect waves-light",attrs:{type:"button"}},[t._v("選擇檔案")])]):"file_download"==e.type?a("div",[a("button",{staticClass:"ml-0 btn btn-xs btn-primary waves-effect waves-light",attrs:{type:"button"},on:{click:function(a){return t.downloadFile(e.file)}}},[t._v("檔案下載")])]):t._e(),a("customComponents",{ref:"customComponents",refInFor:!0,attrs:{type:"edit",i18n:t.i18n,content:e,enumData:t.enumData}}),e.des&&e.des[t.i18n]&&0!=e.setting.showDes&&1!=e.setting.showDesOnTop?a("small",{staticClass:"form-text text-muted"},[t._v(t._s(e.des[t.i18n]))]):t._e()],1)})),0)],1)])])})),0),a("button",{staticClass:"btn btn-light-blue btn-lg btn-block waves-effect waves-light mt-20",attrs:{type:"button"},on:{click:t.addDIV}},[t._v("建立 DIV 區塊")])],1),a("div",{staticClass:"side_field"},[a("div",{staticClass:"col-block side_field_bloxk"},[t._m(1),a("div",{staticClass:"block-content edit-area"},[0!=Object.keys(t.currentEdit).length?a("form",[t.cbData.fieldName&&!t.editDiv?[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"fieldName"}},[t._v("欄位名稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.fieldName,expression:"currentEdit.fieldName"}],staticClass:"form-control form-control-sm",attrs:{id:"fieldName"},domProps:{value:t.currentEdit.fieldName},on:{input:function(e){e.target.composing||t.$set(t.currentEdit,"fieldName",e.target.value)}}})])]:t._e(),"des"!=t.currentEdit.type?a("div",[t.currentEdit.setting&&0!=t.currentEdit.setting.showTitle||t.editDiv?t._l(t.enumData.langs,(function(e,i){return a("div",{key:"標題_"+e.key,staticClass:"form-group"},[a("label",{attrs:{for:"標題"+i}},[t._v("標題"+t._s(e.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.label[e.key],expression:"currentEdit.label[lang.key]"}],staticClass:"form-control form-control-sm",attrs:{id:"標題"+i},domProps:{value:t.currentEdit.label[e.key]},on:{input:function(a){a.target.composing||t.$set(t.currentEdit.label,e.key,a.target.value)}}})])})):t._e(),t.currentEdit.setting&&0!=t.currentEdit.setting.showDes||t.editDiv?t._l(t.enumData.langs,(function(e,i){return a("div",{key:"說明_"+e.key,staticClass:"form-group"},[a("label",{attrs:{for:"說明"+i}},[t._v("說明"+t._s(e.label))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.des[e.key],expression:"currentEdit.des[lang.key]"}],staticClass:"form-control form-control-sm",attrs:{id:"說明"+e.key,rows:"3"},domProps:{value:t.currentEdit.des[e.key]},on:{input:function(a){a.target.composing||t.$set(t.currentEdit.des,e.key,a.target.value)}}})])})):t._e(),t.editDiv?t._e():["textarea"==t.currentEdit.type?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"textarea_rows"}},[t._v("行數")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.rows,expression:"currentEdit.setting.rows"}],staticClass:"form-control form-control-sm",attrs:{id:"textarea_rows"},domProps:{value:t.currentEdit.setting.rows},on:{input:function(e){e.target.composing||t.$set(t.currentEdit.setting,"rows",e.target.value)}}})]):t._e(),"text"==t.currentEdit.type||"textarea"==t.currentEdit.type||"email"==t.currentEdit.type||"number"==t.currentEdit.type||"datepicker"==t.currentEdit.type||"datetimepicker"==t.currentEdit.type?["datepicker"==t.currentEdit.type?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"placeholer"}},[t._v("預設資料")]),a("datepicker",{model:{value:t.currentEdit.date,callback:function(e){t.$set(t.currentEdit,"date",e)},expression:"currentEdit.date"}})],1):"datetimepicker"==t.currentEdit.type?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"placeholer"}},[t._v("預設資料")]),a("datetimepicker",{model:{value:t.currentEdit.datetime,callback:function(e){t.$set(t.currentEdit,"datetime",e)},expression:"currentEdit.datetime"}})],1):"number"==t.currentEdit.type?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"placeholer"}},[t._v("預設資料")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.value,expression:"currentEdit.value"}],staticClass:"form-control form-control-sm",attrs:{id:"placeholer"},domProps:{value:t.currentEdit.value},on:{input:function(e){e.target.composing||t.$set(t.currentEdit,"value",e.target.value)}}})]):a("div",t._l(t.enumData.langs,(function(e,i){return a("div",{key:"預設資料_"+e.key,staticClass:"form-group"},[a("label",{attrs:{for:"預設資料"+i}},[t._v("預設資料"+t._s(e.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.value[e.key],expression:"currentEdit.value[lang.key]"}],staticClass:"form-control form-control-sm",attrs:{id:"預設資料"+i},domProps:{value:t.currentEdit.value[e.key]},on:{input:function(a){a.target.composing||t.$set(t.currentEdit.value,e.key,a.target.value)}}})])})),0),t._l(t.enumData.langs,(function(e,i){return a("div",{key:"提示文字_"+e.key,staticClass:"form-group"},[a("label",{attrs:{for:"提示文字"+i}},[t._v("提示文字"+t._s(e.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.placeholder[e.key],expression:"currentEdit.setting.placeholder[lang.key]"}],staticClass:"form-control form-control-sm",attrs:{id:"提示文字"+i},domProps:{value:t.currentEdit.setting.placeholder[e.key]},on:{input:function(a){a.target.composing||t.$set(t.currentEdit.setting.placeholder,e.key,a.target.value)}}})])}))]:t._e(),t.currentEdit.setting&&0!=t.currentEdit.setting.showWidth?a("div",{staticClass:"form-group"},[a("label",[t._v("欄位，寬度佔表單寬度的比例")]),a("div",{staticClass:"custom-control form-check custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.width,expression:"currentEdit.setting.width"}],staticClass:"form-check-input",attrs:{value:"col-md-12",type:"radio",id:"width100",name:"formwidth"},domProps:{checked:t._q(t.currentEdit.setting.width,"col-md-12")},on:{change:function(e){return t.$set(t.currentEdit.setting,"width","col-md-12")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"width100"}},[t._v("100%")])]),a("div",{staticClass:"custom-control form-check custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.width,expression:"currentEdit.setting.width"}],staticClass:"form-check-input",attrs:{value:"col-md-8",type:"radio",id:"width75",name:"formwidth"},domProps:{checked:t._q(t.currentEdit.setting.width,"col-md-8")},on:{change:function(e){return t.$set(t.currentEdit.setting,"width","col-md-8")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"width75"}},[t._v("75%")])]),a("div",{staticClass:"custom-control form-check custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.width,expression:"currentEdit.setting.width"}],staticClass:"form-check-input",attrs:{value:"col-md-6",type:"radio",id:"width50",name:"formwidth"},domProps:{checked:t._q(t.currentEdit.setting.width,"col-md-6")},on:{change:function(e){return t.$set(t.currentEdit.setting,"width","col-md-6")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"width50"}},[t._v("50%")])]),a("div",{staticClass:"custom-control form-check custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.width,expression:"currentEdit.setting.width"}],staticClass:"form-check-input",attrs:{value:"col-md-3",type:"radio",id:"width25",name:"formwidth"},domProps:{checked:t._q(t.currentEdit.setting.width,"col-md-3")},on:{change:function(e){return t.$set(t.currentEdit.setting,"width","col-md-3")}}}),a("label",{staticClass:"form-check-label",attrs:{for:"width25"}},[t._v("25%")])])]):t._e(),0!=t.currentEdit.setting.showSetting?a("div",{staticClass:"form-group"},[a("label",[t._v("欄位選項")]),a("div",t._l(t.filterSettings,(function(e){return a("div",{key:"欄位選項_"+e.key,staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting[e.key],expression:"currentEdit.setting[setting.key]"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"setting_"+e.key},domProps:{checked:Array.isArray(t.currentEdit.setting[e.key])?t._i(t.currentEdit.setting[e.key],null)>-1:t.currentEdit.setting[e.key]},on:{change:function(a){var i=t.currentEdit.setting[e.key],s=a.target,n=!!s.checked;if(Array.isArray(i)){var r=null,o=t._i(i,r);s.checked?o<0&&t.$set(t.currentEdit.setting,e.key,i.concat([r])):o>-1&&t.$set(t.currentEdit.setting,e.key,i.slice(0,o).concat(i.slice(o+1)))}else t.$set(t.currentEdit.setting,e.key,n)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"setting_"+e.key}},[t._v(t._s(e.label))])])})),0)]):t._e(),"radio"==t.currentEdit.type||"checkbox"==t.currentEdit.type?[a("displayInline",{attrs:{currentEdit:t.currentEdit,langs:t.enumData.langs}})]:t._e(),"select"==t.currentEdit.type||"radio"==t.currentEdit.type||"checkbox"==t.currentEdit.type?[a("tableOptions",{attrs:{currentEdit:t.currentEdit,langs:t.enumData.langs}})]:t._e(),"text"==t.currentEdit.type||"textarea"==t.currentEdit.type?a("div",{staticClass:"form-group"},[a("label",[t._v("資料格式及檢查")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input_min"}},[t._v("最少字數")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.min,expression:"currentEdit.setting.min"}],staticClass:"form-control form-control-sm",attrs:{type:"number",id:"input_min",min:"0"},domProps:{value:t.currentEdit.setting.min},on:{input:function(e){e.target.composing||t.$set(t.currentEdit.setting,"min",e.target.value)}}})])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input_max"}},[t._v("最多字數")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.max,expression:"currentEdit.setting.max"}],staticClass:"form-control form-control-sm",attrs:{type:"number",id:"input_max",min:"0"},domProps:{value:t.currentEdit.setting.max},on:{input:function(e){e.target.composing||t.$set(t.currentEdit.setting,"max",e.target.value)}}})])])])]):t._e(),"number"==t.currentEdit.type?a("div",{staticClass:"form-group"},[a("label",[t._v("資料格式及檢查")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[a("label",{attrs:{for:"input_step"}},[t._v("小數點位數")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.step,expression:"currentEdit.setting.step"}],staticClass:"browser-default custom-select form-control-sm",attrs:{id:"input_step"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.currentEdit.setting,"step",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"0"}},[t._v("0")]),a("option",{attrs:{value:"0.1"}},[t._v("1")]),a("option",{attrs:{value:"0.01"}},[t._v("2")]),a("option",{attrs:{value:"0.001"}},[t._v("3")])])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input_min"}},[t._v("最小值")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.min,expression:"currentEdit.setting.min"}],staticClass:"form-control form-control-sm",attrs:{type:"number",id:"input_min"},domProps:{value:t.currentEdit.setting.min},on:{input:function(e){e.target.composing||t.$set(t.currentEdit.setting,"min",e.target.value)}}})])]),a("div",{staticClass:"col-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"input_max"}},[t._v("最大值")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.max,expression:"currentEdit.setting.max"}],staticClass:"form-control form-control-sm",attrs:{type:"number",id:"input_max"},domProps:{value:t.currentEdit.setting.max},on:{input:function(e){e.target.composing||t.$set(t.currentEdit.setting,"max",e.target.value)}}})])])])]):t._e(),"file_download"==t.currentEdit.type?a("div",{staticClass:"form-group"},[a("label",[t._v("上傳下載檔案")]),a("br"),t.currentEdit.file?a("button",{staticClass:"ml-0 btn btn-primary btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.downloadFile(t.currentEdit.file)}}},[a("i",{staticClass:"fa fa-download mr-1"}),t._v(" 檔案預覽 ")]):t._e(),a("input",{staticClass:"form-control-file",attrs:{type:"file"},on:{change:t.uploadFile}})]):t._e(),"file_upload"==t.currentEdit.type?a("div",[a("div",{staticClass:"form-group"},[a("label",[t._v("上傳檔案格式限制")]),a("div",[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.accept,expression:"currentEdit.setting.accept"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"pdf",id:"upload_pdf"},domProps:{checked:Array.isArray(t.currentEdit.setting.accept)?t._i(t.currentEdit.setting.accept,"pdf")>-1:t.currentEdit.setting.accept},on:{change:function(e){var a=t.currentEdit.setting.accept,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n="pdf",r=t._i(a,n);i.checked?r<0&&t.$set(t.currentEdit.setting,"accept",a.concat([n])):r>-1&&t.$set(t.currentEdit.setting,"accept",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.currentEdit.setting,"accept",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"upload_pdf"}},[t._v("PDF")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.accept,expression:"currentEdit.setting.accept"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"doc",id:"upload_doc"},domProps:{checked:Array.isArray(t.currentEdit.setting.accept)?t._i(t.currentEdit.setting.accept,"doc")>-1:t.currentEdit.setting.accept},on:{change:function(e){var a=t.currentEdit.setting.accept,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n="doc",r=t._i(a,n);i.checked?r<0&&t.$set(t.currentEdit.setting,"accept",a.concat([n])):r>-1&&t.$set(t.currentEdit.setting,"accept",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.currentEdit.setting,"accept",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"upload_doc"}},[t._v("DOC")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.accept,expression:"currentEdit.setting.accept"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"docx",id:"upload_docx"},domProps:{checked:Array.isArray(t.currentEdit.setting.accept)?t._i(t.currentEdit.setting.accept,"docx")>-1:t.currentEdit.setting.accept},on:{change:function(e){var a=t.currentEdit.setting.accept,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n="docx",r=t._i(a,n);i.checked?r<0&&t.$set(t.currentEdit.setting,"accept",a.concat([n])):r>-1&&t.$set(t.currentEdit.setting,"accept",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.currentEdit.setting,"accept",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"upload_docx"}},[t._v("DOCX")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.accept,expression:"currentEdit.setting.accept"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"odt",id:"upload_odt"},domProps:{checked:Array.isArray(t.currentEdit.setting.accept)?t._i(t.currentEdit.setting.accept,"odt")>-1:t.currentEdit.setting.accept},on:{change:function(e){var a=t.currentEdit.setting.accept,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n="odt",r=t._i(a,n);i.checked?r<0&&t.$set(t.currentEdit.setting,"accept",a.concat([n])):r>-1&&t.$set(t.currentEdit.setting,"accept",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.currentEdit.setting,"accept",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"upload_odt"}},[t._v("ODT")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.accept,expression:"currentEdit.setting.accept"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"jpg",id:"upload_jpg"},domProps:{checked:Array.isArray(t.currentEdit.setting.accept)?t._i(t.currentEdit.setting.accept,"jpg")>-1:t.currentEdit.setting.accept},on:{change:function(e){var a=t.currentEdit.setting.accept,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n="jpg",r=t._i(a,n);i.checked?r<0&&t.$set(t.currentEdit.setting,"accept",a.concat([n])):r>-1&&t.$set(t.currentEdit.setting,"accept",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.currentEdit.setting,"accept",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"upload_jpg"}},[t._v("JPG")])]),a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.accept,expression:"currentEdit.setting.accept"}],staticClass:"form-check-input",attrs:{type:"checkbox",value:"png",id:"upload_png"},domProps:{checked:Array.isArray(t.currentEdit.setting.accept)?t._i(t.currentEdit.setting.accept,"png")>-1:t.currentEdit.setting.accept},on:{change:function(e){var a=t.currentEdit.setting.accept,i=e.target,s=!!i.checked;if(Array.isArray(a)){var n="png",r=t._i(a,n);i.checked?r<0&&t.$set(t.currentEdit.setting,"accept",a.concat([n])):r>-1&&t.$set(t.currentEdit.setting,"accept",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(t.currentEdit.setting,"accept",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"upload_png"}},[t._v("PNG")])])]),a("label",[t._v("上傳大小限制 20 MB (由系統統一設定)")])]),a("div",{staticClass:"form-group"},[a("label",[t._v("範例檔案")]),a("br"),t.currentEdit.file?a("button",{staticClass:"ml-0 btn btn-primary btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.downloadFile(t.currentEdit.file)}}},[a("i",{staticClass:"fa fa-download mr-1"}),t._v(" 檔案預覽 ")]):t._e(),a("input",{staticClass:"form-control-file",attrs:{type:"file"},on:{change:t.uploadFile}})])]):t._e(),t.rulesTypeArray.includes(t.currentEdit.type)?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"checkData"}},[t._v("資料檢查")]),a("small",{staticClass:"text-muted"},[t._v("空白則不檢查")]),a("br"),a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.$editModal("rules",t.rulesInit,"new")}}},[t._v("新增檢查")]),a("div",{staticClass:"form-control",staticStyle:{"min-height":"120px"}},t._l(t.currentEdit.rules,(function(e,i){return a("div",{key:"資料檢查_"+e.key},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button","data-original-title":"Edit Client"},on:{click:function(e){return t.$editModal("rules",t.rulesInit,i)}}},[a("i",{staticClass:"fa fa-pencil"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button","data-original-title":"Remove Client"},on:{click:function(e){return t.$removeOption(t.currentEdit.rules,i)}}},[a("i",{staticClass:"fa fa-times"})])]),a("label",[t._v(t._s(t.$renderFunction(t.enumData.rules,e.key,"key")&&t.$renderFunction(t.enumData.rules,e.key,"key").label))])])})),0),a("div",{staticClass:"modal fade",attrs:{id:"rulesModal"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.rulesEdit.key,expression:"rulesEdit.key"}],staticClass:"md-form md-outline browser-default custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.rulesEdit,"key",e.target.multiple?a:a[0])}}},t._l(t.rulesInType,(function(e){return a("option",{key:"檢查規則_"+e.key,domProps:{value:e.key}},[t._v(t._s(e.label))])})),0)]),"datepicker"==t.currentEdit.type?a("div",{staticClass:"form-group"},[a("label",[t._v("請輸入日期")]),a("datepicker",{attrs:{placeholder:"請輸入日期"},model:{value:t.rulesEdit.value,callback:function(e){t.$set(t.rulesEdit,"value",e)},expression:"rulesEdit.value"}})],1):t._e(),"datetimepicker"==t.currentEdit.type?a("div",{staticClass:"form-group"},[a("label",[t._v("請輸入日期時間")]),a("datetimepicker",{attrs:{placeholder:"請輸入日期時間"},model:{value:t.rulesEdit.value,callback:function(e){t.$set(t.rulesEdit,"value",e)},expression:"rulesEdit.value"}})],1):t._e(),t._l(t.enumData.langs,(function(e){return a("div",{key:"錯誤訊息_"+e.key,staticClass:"form-group"},[a("label",[t._v("錯誤訊息"+t._s(e.label))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.rulesEdit.message[e.key],expression:"rulesEdit.message[lang.key]"}],staticClass:"form-control form-control-sm",attrs:{rows:"3"},domProps:{value:t.rulesEdit.message[e.key]},on:{input:function(a){a.target.composing||t.$set(t.rulesEdit.message,e.key,a.target.value)}}})])}))],2),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm btn-default waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$saveModal("rules")}}},[t._v("儲存")]),a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$closeModal("rules",t.rulesInit)}}},[t._v("關閉")])])])])])]):t._e(),a("customComponents",{ref:"customComponents",attrs:{type:"setting",i18n:t.i18n,currentEdit:t.currentEdit,enumData:t.enumData}})]],2):a("div",t._l(t.enumData.langs,(function(e){return a("div",{key:e.key,staticClass:"form-group"},[a("label",[t._v(t._s(e.label))]),a("editor",{attrs:{"api-key":"zmpxfb6q25nhcjo2zi5camd5ntjrkh46mllcpab45h474fa0",init:{menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount"]}},model:{value:t.currentEdit.content[e.key],callback:function(a){t.$set(t.currentEdit.content,e.key,a)},expression:"currentEdit.content[lang.key]"}})],1)})),0)],2):t._e()])])])]),a("div",{staticClass:"modal fade",attrs:{id:"confirmModal"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v(t._s(t.confirm.title))]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])]),a("div",{staticClass:"modal-body"},[t._v(t._s(t.confirm.msg))]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm btn-primary waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.confirm.thenCB()}}},[t._v("確定")]),a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$closeModal("confirm")}}},[t._v("關閉")])])])])]),t.cbData.dev?a("div",{staticClass:"row"},[a("div",{staticClass:"col-4"},[t._v(" 固定欄位 "),a("pre",[t._v(t._s(JSON.stringify(this.defaultItems,null,2)))])]),a("div",{staticClass:"col-4"},[t._v(" 所有新增欄位 "),a("pre",[t._v(t._s(JSON.stringify(this.defaultInsertContents,null,2)))])]),a("div",{staticClass:"col-4"},[t._v(" JSON輸出 "),a("pre",[t._v(t._s(JSON.stringify(this.defaultContents,null,2)))])])]):t._e()])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("small",{staticClass:"form-text text-muted mb-2 side_element_des"},[a("i",{staticClass:"fa fa-lock"}),t._v(" 項目不可重複選取 "),a("br"),a("i",{staticClass:"icon-repect"}),t._v(" 項目僅能使用一次 ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block-header has-border"},[a("h3",[a("strong",[t._v("欄位設定")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("檢查規則")]),a("small",{staticClass:"form-text text-muted",staticStyle:{margin:"14px 0 0 4px"}},[t._v("請選擇您想要的檢查規則")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])}],r=(a("99af"),a("a623"),a("4de4"),a("4160"),a("caad"),a("d81d"),a("45fc"),a("6062"),a("2532"),a("3ca3"),a("466d"),a("159b"),a("ddb0"),a("ca72")),o=a("b76a"),l=a.n(o),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mt-0 mb-0 md-form md-outline input-with-post-icon datepicker",attrs:{id:"date-picker-example"}},[a("input",{staticClass:"form-control mb-0",attrs:{type:"text",placeholder:t.placeholder,autocomplete:"off"},domProps:{value:t.value}}),a("i",{staticClass:"fa fa-calendar input-prefix",attrs:{tabindex:"0"}})])},d=[],u={name:"datepicker",props:["value","placeholder"],mounted:function(){var t=this;$(this.$el).datepicker({autoclose:!0,format:"yyyy-mm-dd",onClose:function(){t.$emit("input",this.get("select","yyyy-mm-dd"))}})},destroyed:function(){$(this.$el).datepicker("destroy")}},m=u,p=a("2877"),f=Object(p["a"])(m,c,d,!1,null,null,null),v=f.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"mt-0 mb-0 md-form md-outline input-with-post-icon datepicker",attrs:{id:"date-picker-example"}},[a("input",{staticClass:"form-control mb-0",attrs:{type:"text",placeholder:t.placeholder,autocomplete:"off"},domProps:{value:t.date}}),a("i",{staticClass:"fa fa-calendar input-prefix"})])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"mt-0 mb-0 md-form md-outline input-with-post-icon timepicker"},[a("input",{staticClass:"form-control mb-0",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.time}}),a("i",{staticClass:"fa fa-clock-o input-prefix"})])])])},b=[],g=(a("1276"),{name:"date_timepicker",props:["value","placeholder"],data:function(){return{date:"",time:""}},watch:{value:function(t){this.date=t.split(" ")[0],this.time=t.split(" ")[1]}},mounted:function(){var t=this,e=this;$(this.$el.firstChild).datepicker({autoclose:!0,format:"yyyy-mm-dd",onClose:function(){e.date=this.get("select","yyyy-mm-dd"),e.$emit("input","".concat(e.date," ").concat(e.time))}}),setTimeout((function(){$(t.$el.lastChild.childNodes[0]).timepicker().on("change",(function(t){e.time=t.target.value,e.$emit("input","".concat(e.date," ").concat(e.time))}))}),1e3)},destroyed:function(){$(this.$el.firstChild).datepicker("destroy"),$(this.$el.lastChild).timepicker("destroy")}}),y=g,C=Object(p["a"])(y,h,b,!1,null,null,null),_=C.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"edit"==t.type?a("div",["name"==t.content.type?a("name",{attrs:{type:"edit",i18n:t.i18n,content:t.content}}):"name_en"==t.content.type?a("nameEn",{attrs:{type:"edit",i18n:t.i18n,content:t.content}}):"batch"==t.content.type?a("batch",{attrs:{type:"edit",i18n:t.i18n,content:t.content}}):"semester"==t.content.type?a("semester",{attrs:{type:"edit",i18n:t.i18n,content:t.content,enumData:t.enumData}}):"wish"==t.content.type?a("wish",{attrs:{type:"edit",i18n:t.i18n,content:t.content,enumData:t.enumData}}):t._e()],1):a("div",["name"==t.currentEdit.type?a("name",{attrs:{type:"setting",i18n:t.i18n}}):"name_en"==t.currentEdit.type?a("nameEn",{attrs:{type:"setting",i18n:t.i18n}}):"batch"==t.currentEdit.type?a("batch",{attrs:{type:"setting",i18n:t.i18n,currentEdit:t.currentEdit,enumData:t.enumData}}):"semester"==t.currentEdit.type?a("semester",{attrs:{type:"setting",i18n:t.i18n,currentEdit:t.currentEdit,enumData:t.enumData}}):"wish"==t.currentEdit.type?a("wish",{attrs:{type:"setting",i18n:t.i18n,currentEdit:t.currentEdit,enumData:t.enumData}}):t._e()],1)},E=[],w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"edit"==t.type?a("div",[a("div",{staticClass:"form-row"},[a("div",{class:t.content.setting.width||"col"},[a("input",{staticClass:"form-control",attrs:{placeholder:""+t.content.label[t.i18n]}})])])]):a("div",[a("div")])},x=[],D={name:"name",props:{type:{type:String,required:!0,default:""},i18n:{type:String,required:!0,default:""},content:{type:Object,default:function(){return{}}}},data:function(){return{}}},I=D,O=Object(p["a"])(I,w,x,!1,null,null,null),N=O.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"edit"==t.type?a("div",[a("div",{staticClass:"form-row"},[a("div",{staticClass:"col-md-4"},[a("input",{staticClass:"form-control",attrs:{placeholder:""+t.content.setting.placeholder.first[t.i18n]}})]),a("div",{staticClass:"col-md-4"},[a("input",{staticClass:"form-control",attrs:{placeholder:""+t.content.setting.placeholder.middle[t.i18n]}})]),a("div",{staticClass:"col-md-4"},[a("input",{staticClass:"form-control",attrs:{placeholder:""+t.content.setting.placeholder.last[t.i18n]}})])])]):a("div",[a("div")])},T=[],A={name:"name_en",props:{type:{type:String,required:!0,default:""},i18n:{type:String,required:!0,default:""},content:{type:Object,default:function(){return{}}}},data:function(){return{}}},H=A,S=Object(p["a"])(H,P,T,!1,null,null,null),M=S.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"edit"==t.type?a("div",[t.content.des&&t.content.des[t.i18n]?a("small",{staticClass:"form-text text-muted form-group"},[t._v(t._s(t.content.des[t.i18n]))]):t._e(),t._l(t.content.datas,(function(e,i){return a("div",{key:"batch_"+i,staticClass:"form-group"},[a("label",[t._v(t._s(e.label[t.i18n]))]),a("div",t._l(e.options,(function(e,s){return a("div",{key:"batch_"+i+"_"+s,staticClass:"custom-control form-check",class:{"form-inline":!t.content.setting.inline,"custom-control-inline":t.content.setting.inline}},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",id:"batch_"+i+"_"+s,name:"batch"},domProps:{value:s}}),a("label",{staticClass:"form-check-label",attrs:{for:"batch_"+i+"_"+s}},[t._v(t._s(e.label[t.i18n]))])])})),0)])}))],2):a("div",[a("displayInline",{attrs:{currentEdit:t.currentEdit}}),a("label",[t._v("選項")]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:t.openOptionModal}},[t._v("選項管理")])]),a("div",{staticClass:"modal fade",attrs:{id:"optionModal"}},[a("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[t._l(t.currentEdit.datas,(function(e,i){return a("div",{key:"batch_"+i,staticClass:"form-group"},[a("table",{staticClass:"table"},[a("thead",{staticClass:"grey lighten-3"},[a("tr",[a("th",{attrs:{colspan:"3"}},[a("div",{staticClass:"btn-group mb-2"},[a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:0==i},on:{click:function(e){return t.$upOption(t.currentEdit.datas,i)}}},[a("i",{staticClass:"fa fa-chevron-up"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:i==t.currentEdit.datas.length-1},on:{click:function(e){return t.$downOption(t.currentEdit.datas,i)}}},[a("i",{staticClass:"fa fa-chevron-down"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.$removeOption(t.currentEdit.datas,i)}}},[a("i",{staticClass:"fa fa-times"})])]),t._l(t.enumData.langs,(function(s){return a("div",{key:"batch_"+i+"_類別_"+s.key},[a("label",{attrs:{for:"類別-"+i+"-"+s.key}},[t._v("類別 - "+t._s(s.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.label[s.key],expression:"data.label[lang.key]"}],staticClass:"form-control form-control-sm",attrs:{id:"類別-"+i+"-"+s.key},domProps:{value:e.label[s.key]},on:{input:function(a){a.target.composing||t.$set(e.label,s.key,a.target.value)}}})])})),a("button",{staticClass:"ml-0 mt-2 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.addBatch(i)}}},[t._v("新增梯次")])],2)])]),a("tbody",t._l(e.options,(function(s,n){return a("tr",{key:"batch_"+i+"_梯次_"+n},[a("td",{staticClass:"text-center"},[t._v(t._s(n+1))]),a("td",{staticClass:"text-center"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:0==n},on:{click:function(a){return t.$upOption(e.options,n)}}},[a("i",{staticClass:"fa fa-chevron-up"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:n==e.options.length-1},on:{click:function(a){return t.$downOption(e.options,n)}}},[a("i",{staticClass:"fa fa-chevron-down"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button"},on:{click:function(a){return t.$removeOption(e.options,n)}}},[a("i",{staticClass:"fa fa-times"})])])]),a("td",t._l(t.enumData.langs,(function(e){return a("div",{key:"梯次_"+n+"_選項內容_"+e.key},[a("label",{attrs:{for:"選項內容-"+n+"-"+i+"-"+e.key}},[t._v(t._s(e.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.label[e.key],expression:"option.label[lang.key]"}],staticClass:"form-control form-control-sm",attrs:{id:"選項內容-"+n+"-"+i+"-"+e.key},domProps:{value:s.label[e.key]},on:{input:function(a){a.target.composing||t.$set(s.label,e.key,a.target.value)}}})])})),0)])})),0)])])})),a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:t.addGroup}},[t._v("新增類別")]),a("div",{staticClass:"modal fade",attrs:{id:"batchModal"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},t._l(t.enumData.langs,(function(e){return a("div",{key:"梯次名稱-"+e.key},[a("label",{attrs:{for:"梯次名稱"+e.key}},[t._v("梯次名稱 - "+t._s(e.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.batchEdit.label[e.key],expression:"batchEdit.label[lang.key]"}],staticClass:"form-control col-md-12",attrs:{id:"梯次名稱"+e.key,placeholder:"請輸入梯次名稱"},domProps:{value:t.batchEdit.label[e.key]},on:{input:function(a){a.target.composing||t.$set(t.batchEdit.label,e.key,a.target.value)}}})])})),0)]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm btn-default waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.insertBatch()}}},[t._v("儲存")]),a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:t.closeBatch}},[t._v("關閉")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"groupModal"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},t._l(t.enumData.langs,(function(e){return a("div",{key:"類別名稱-"+e.key},[a("label",{attrs:{for:"類別名稱"+e.key}},[t._v("類別名稱 - "+t._s(e.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.groupEdit.label[e.key],expression:"groupEdit.label[lang.key]"}],staticClass:"form-control col-md-12",attrs:{id:"類別名稱"+e.key,placeholder:"請輸入類別名稱"},domProps:{value:t.groupEdit.label[e.key]},on:{input:function(a){a.target.composing||t.$set(t.groupEdit.label,e.key,a.target.value)}}})])})),0)]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm btn-default waves-effect waves-light",attrs:{type:"button"},on:{click:t.insertGroup}},[t._v("儲存")]),a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:t.closeGroup}},[t._v("關閉")])])])])])],2),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$closeModal("option")}}},[t._v("關閉")])])])])])],1)},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("選項管理")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("報名梯次設定")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("報名梯次設定")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])}],W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"form-group"},[a("div",{staticClass:"custom-control form-check custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.inline,expression:"currentEdit.setting.inline"}],staticClass:"form-check-input",attrs:{type:"radio",id:"display_block",name:"display"},domProps:{value:!1,checked:t._q(t.currentEdit.setting.inline,!1)},on:{change:[function(e){return t.$set(t.currentEdit.setting,"inline",!1)},t.checkInline]}}),a("label",{staticClass:"form-check-label",attrs:{for:"display_block"}},[t._v("垂直排列")])]),a("div",{staticClass:"custom-control form-check custom-control-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.inline,expression:"currentEdit.setting.inline"}],staticClass:"form-check-input",attrs:{type:"radio",id:"display_inline",name:"display"},domProps:{value:!0,checked:t._q(t.currentEdit.setting.inline,!0)},on:{change:[function(e){return t.$set(t.currentEdit.setting,"inline",!0)},t.checkInline]}}),a("label",{staticClass:"form-check-label",attrs:{for:"display_inline"}},[t._v("水平排列")])])])])},F=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",[t._v("選項排列方式 "),a("small",{staticClass:"form-text text-muted"},[t._v('(若下方任一選項勾選"額外輸入"自動改為垂直排列)')])])}],L={name:"display",props:["currentEdit"],mounted:function(){},methods:{checkInline:function(){var t=this,e=this.currentEdit.options.some((function(e){if(e.des)return t.currentEdit.setting.inline=!1,!0}));!e&&this.currentEdit.setting.inline&&(this.currentEdit.setting.inline=!0)}}},J=L,B=Object(p["a"])(J,W,F,!1,null,null,null),V=B.exports,G={name:"batch",components:{displayInline:V},props:{type:{type:String,required:!0,default:""},i18n:{type:String,required:!0,default:""},content:{type:Object,default:function(){return{}}},currentEdit:{type:Object,default:function(){return{}}},enumData:{type:Object,default:function(){return{}}}},data:function(){return{batchEdit:{label:{}},batchIndex:"",groupEdit:{label:{},options:[]}}},created:function(){},methods:{addGroup:function(){$("#groupModal").appendTo("body").modal("show")},insertGroup:function(){this.currentEdit.datas.push(this.groupEdit),this.closeGroup()},closeGroup:function(){this.groupEdit={label:{},options:[]},$("#groupModal").modal("hide")},addBatch:function(t){this.batchIndex=t,$("#batchModal").appendTo("body").modal("show")},insertBatch:function(){this.currentEdit.datas[this.batchIndex].options.push({label:this.batchEdit.label,uuid:this.$uuid()}),this.closeBatch()},closeBatch:function(){this.batchEdit={label:{}},this.batchIndex="",$("#batchModal").modal("hide")},openOptionModal:function(){$("#optionModal").appendTo("body").modal("show")}}},R=G,z=Object(p["a"])(R,j,q,!1,null,null,null),X=z.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"edit"==t.type?a("div",[t.content.des&&t.content.des[t.i18n]?a("small",{staticClass:"form-text text-muted form-group"},[t._v(t._s(t.content.des[t.i18n]))]):t._e(),t._l(t.content.semester,(function(e,i){return a("div",{key:"semester_"+i,staticClass:"form-group form-row"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"semester_checkbox_"+i}}),a("label",{staticClass:"form-check-label",attrs:{for:"semester_checkbox_"+i}},[t._v(" "+t._s(e.label[t.i18n])+" ( "+t._s(e.startDate)+" - "+t._s(e.endDate)+" ) ")]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"ml-4 form-group form-row"},[a("div",{staticClass:"col-6"},[a("label",[t._v("體驗開始日期")]),a("datepicker")],1),a("div",{staticClass:"col-6"},[a("label",[t._v("體驗結束日期")]),a("datepicker")],1)]),a("div",{staticClass:"form-group"},[a("label",[t._v("申請選擇申請體驗的學校志願，最少 1 個。")]),t._l(parseInt(t.content.setting.limit),(function(e){return a("div",{key:e,staticClass:"form-group form-row"},[a("div",{staticClass:"col-1 text-center"},[t._v(t._s(e)+".")]),a("div",{staticClass:"col-3"},[a("select",{staticClass:"browser-default custom-select"},t._l(t.cityList,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name[t.i18n]))])})),0)]),a("div",{staticClass:"col-4"},[a("select",{staticClass:"browser-default custom-select"},t._l(t.content.school,(function(e,i){return a("option",{key:"school_"+i,domProps:{value:i}},[t._v(t._s(e.name[t.i18n]))])})),0)]),a("div",{staticClass:"col-4"},[a("select",{staticClass:"browser-default custom-select"},t._l(6,(function(e){return a("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})),0)])])}))],2)])])}))],2):a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"semester_limit"}},[t._v("開放填寫志願數")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.limit,expression:"currentEdit.setting.limit"}],staticClass:"form-control form-control-sm",attrs:{type:"number",id:"semester_limit",min:"0"},domProps:{value:t.currentEdit.setting.limit},on:{input:function(e){e.target.composing||t.$set(t.currentEdit.setting,"limit",e.target.value)}}})]),a("label",[t._v("學期選項")]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.openOptionModal("Semester")}}},[t._v("選項管理")])]),a("div",{staticClass:"modal fade",attrs:{id:"optionSemesterModal"}},[a("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.addOption("semester",t.semesterInit)}}},[t._v("新增學期")]),a("div",{staticClass:"editor_options-wrap"},t._l(t.currentEdit.semester,(function(e,i){return a("div",{key:"semester_"+i,staticClass:"options-item"},[a("div",{staticClass:"options-hd"},[a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("label",[t._v("學期開始")]),a("datepicker",{model:{value:e.startDate,callback:function(a){t.$set(e,"startDate",a)},expression:"data.startDate"}})],1),a("div",{staticClass:"col-6"},[a("label",[t._v("學期結束")]),a("datepicker",{model:{value:e.endDate,callback:function(a){t.$set(e,"endDate",a)},expression:"data.endDate"}})],1)])]),a("span",{staticClass:"action"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:0==i},on:{click:function(e){return t.$upOption(t.currentEdit.semester,i)}}},[a("i",{staticClass:"fa fa-chevron-up"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:i==t.currentEdit.semester.length-1},on:{click:function(e){return t.$downOption(t.currentEdit.semester,i)}}},[a("i",{staticClass:"fa fa-chevron-down"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.$removeOption(t.currentEdit.semester,i)}}},[a("i",{staticClass:"fa fa-times"})])])])]),a("div",{staticClass:"options-bd"},t._l(t.enumData.langs,(function(s){return a("div",{key:"semester_"+i+"_"+s.key,staticClass:"language-item"},[a("label",{attrs:{for:"學期_"+i+"_"+s.key}},[t._v("學期 - "+t._s(s.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.label[s.key],expression:"data.label[lang.key]"}],staticClass:"form-control col-md-12",attrs:{id:"學期_"+i+"_"+s.key,placeholder:"請輸入學期"},domProps:{value:e.label[s.key]},on:{input:function(a){a.target.composing||t.$set(e.label,s.key,a.target.value)}}})])})),0)])})),0)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$closeModal("optionSemester")}}},[t._v("關閉")])])])])]),a("label",[t._v("參與學校")]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.openOptionModal("School")}}},[t._v("選項管理")])]),a("div",{staticClass:"modal fade",attrs:{id:"optionSchoolModal"}},[a("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.addOption("school",t.schoolInit)}}},[t._v("新增學校")]),a("div",{staticClass:"editor_options-wrap"},t._l(t.currentEdit.school,(function(e,i){return a("div",{key:"school_"+i,staticClass:"options-item"},[a("div",{staticClass:"options-hd"},[a("div",[a("label",{attrs:{for:"schoolCity_"+i}},[t._v("縣市")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.cityId,expression:"data.cityId"}],staticClass:"browser-default custom-select",attrs:{id:"schoolCity_"+i},on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"cityId",a.target.multiple?i:i[0])}}},t._l(t.cityList,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name[t.i18n]))])})),0)]),a("span",{staticClass:"additional"}),a("span",{staticClass:"action"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:0==i},on:{click:function(e){return t.$upOption(t.currentEdit.school,i)}}},[a("i",{staticClass:"fa fa-chevron-up"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:i==t.currentEdit.school.length-1},on:{click:function(e){return t.$downOption(t.currentEdit.school,i)}}},[a("i",{staticClass:"fa fa-chevron-down"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.$removeOption(t.currentEdit.school,i)}}},[a("i",{staticClass:"fa fa-times"})])])])]),a("div",{staticClass:"options-bd"},t._l(t.enumData.langs,(function(s){return a("div",{key:"school_"+i+"_駐外單位_"+s.key,staticClass:"language-item"},[a("label",{attrs:{for:"駐外單位_"+i+"_"+s.key}},[t._v("駐外單位 - "+t._s(s.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name[s.key],expression:"data.name[lang.key]"}],staticClass:"form-control col-md-12",attrs:{id:"駐外單位_"+i+"_"+s.key,placeholder:"請輸入駐外單位"},domProps:{value:e.name[s.key]},on:{input:function(a){a.target.composing||t.$set(e.name,s.key,a.target.value)}}})])})),0)])})),0)])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$closeModal("optionSchool")}}},[t._v("關閉")])])])])])])},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("選項管理")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("選項管理")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])}],U=(a("4fad"),a("3835")),Y={name:"semester",components:{datepicker:v},props:{type:{type:String,required:!0,default:""},i18n:{type:String,required:!0,default:""},content:{type:Object,default:function(){return{}}},currentEdit:{type:Object,default:function(){return{}}},enumData:{type:Object,default:function(){return{}}}},data:function(){return{semesterEdit:{label:{},startDate:"",endDate:""},semesterInit:{label:{},startDate:"",endDate:""},semesterEditIndex:"",schoolEdit:{name:{},cityId:""},schoolInit:{name:{},cityId:""},schoolEditIndex:""}},computed:{cityList:function(){return this.enumData.cities?Object.entries(this.enumData.cities).map((function(t){var e=Object(U["a"])(t,2),a=e[0],i=e[1];return{id:a,name:i}})):[]}},created:function(){},methods:{addOption:function(t,e){this.currentEdit[t].push(e)},openOptionModal:function(t){$("#option".concat(t,"Modal")).appendTo("body").modal("show")}}},Z=Y,tt=Object(p["a"])(Z,K,Q,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"edit"==t.type?a("div",[a("div",{staticClass:"form-group"},t._l(t.content.wish,(function(e,i){return a("div",{key:"wish_"+i,staticClass:"form-inline mb-2"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedRankList[i],expression:"selectedRankList[wishIndex]"}],staticClass:"browser-default custom-select input-group",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.selectedRankList,i,e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}}),t._l(parseInt(t.content.setting.limit),(function(e){return a("option",{key:"limit_no"+e,attrs:{disabled:t.rankIsSeleted(e)},domProps:{value:e}},[t._v(t._s(e))])}))],2),a("label",{staticClass:"ml-2"},[t._v(t._s(t.getAreaText(e.areaId))+" "+t._s(e.name[t.i18n]))])])})),0)]):a("div",[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"wish_limit"}},[t._v("開放填寫志願數")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.currentEdit.setting.limit,expression:"currentEdit.setting.limit"}],staticClass:"form-control form-control-sm",attrs:{type:"number",id:"wish_limit",min:"0"},domProps:{value:t.currentEdit.setting.limit},on:{input:function(e){e.target.composing||t.$set(t.currentEdit.setting,"limit",e.target.value)}}})]),a("label",[t._v("志願地區")]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:t.openOptionModal}},[t._v("選項管理")])]),a("div",{staticClass:"modal fade",attrs:{id:"optionModal"}},[a("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"editor_options-wrap"},t._l(t.currentEdit.wish,(function(e,i){return a("div",{key:"wish_"+i,staticClass:"options-item"},[a("div",{staticClass:"options-hd"},[a("span",{staticClass:"sort"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.areaId,expression:"data.areaId"}],staticClass:"browser-default custom-select",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"areaId",a.target.multiple?i:i[0])}}},t._l(t.areaList,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name[t.i18n]))])})),0)]),a("span",{staticClass:"action"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:0==i},on:{click:function(e){return t.$upOption(t.currentEdit.wish,i)}}},[a("i",{staticClass:"fa fa-chevron-up"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:i==t.currentEdit.wish.length-1},on:{click:function(e){return t.$downOption(t.currentEdit.wish,i)}}},[a("i",{staticClass:"fa fa-chevron-down"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.$removeOption(t.currentEdit.wish,i)}}},[a("i",{staticClass:"fa fa-times"})])])])]),a("div",{staticClass:"options-bd"},t._l(t.enumData.langs,(function(s){return a("div",{key:"wish_"+i+"_地點_"+s.key,staticClass:"language-item"},[a("label",{attrs:{for:"地點_"+i+"_"+s.key}},[t._v("地點 - "+t._s(s.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name[s.key],expression:"data.name[lang.key]"}],staticClass:"form-control col-md-12",attrs:{id:"地點_"+i+"_"+s.key,placeholder:"請輸入地點"},domProps:{value:e.name[s.key]},on:{input:function(a){a.target.composing||t.$set(e.name,s.key,a.target.value)}}})])})),0)])})),0),a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:t.addOption}},[t._v("新增志願")])]),a("div",{staticClass:"modal fade",attrs:{id:"wishModal"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"wishArea"}},[t._v("區域")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.wishEdit.areaId,expression:"wishEdit.areaId"}],staticClass:"browser-default custom-select",attrs:{id:"wishArea"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.wishEdit,"areaId",e.target.multiple?a:a[0])}}},t._l(t.areaList,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name[t.i18n]))])})),0)]),a("div",{staticClass:"form-group"},t._l(t.enumData.langs,(function(e){return a("div",{key:"地點_"+e.key},[a("label",{attrs:{for:"地點"+e.key}},[t._v("地點 - "+t._s(e.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.wishEdit.name[e.key],expression:"wishEdit.name[lang.key]"}],staticClass:"form-control col-md-12",attrs:{id:"地點"+e.key,placeholder:"請輸入地點"},domProps:{value:t.wishEdit.name[e.key]},on:{input:function(a){a.target.composing||t.$set(t.wishEdit.name,e.key,a.target.value)}}})])})),0)]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm btn-default waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$saveModal("wish")}}},[t._v("儲存")]),a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$closeModal("wish",t.wishInit)}}},[t._v("關閉")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$closeModal("option")}}},[t._v("關閉")])])])])])])},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("選項管理")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("志願地點")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])}],st=(a("b0c0"),{name:"wish",props:{type:{type:String,required:!0,default:""},i18n:{type:String,required:!0,default:""},content:{type:Object,default:function(){return{}}},currentEdit:{type:Object,default:function(){return{}}},enumData:{type:Object,default:function(){return{}}}},data:function(){return{selectedRankList:[],wishEdit:{id:"",name:{},areaId:""},wishInit:{name:{},areaId:""},wishEditIndex:""}},computed:{areaList:function(){return this.enumData.areas?Object.entries(this.enumData.areas).map((function(t){var e=Object(U["a"])(t,2),a=e[0],i=e[1];return{id:a,name:i}})):[]}},created:function(){},methods:{addOption:function(){this.currentEdit.wish.push({areaId:"",name:{}})},getAreaText:function(t){var e=this.areaList.find((function(e){return e.id==t}));return"undefined"==typeof e||"undefined"==typeof e.name[this.i18n]?"":e.name[this.i18n]},rankIsSeleted:function(t){return this.selectedRankList.some((function(e){return e==t}))},openOptionModal:function(){$("#optionModal").appendTo("body").modal("show")}}}),nt=st,rt=Object(p["a"])(nt,at,it,!1,null,null,null),ot=rt.exports,lt={name:"custom_components",props:{type:{type:String,required:!0,default:""},i18n:{type:String,required:!0,default:""},content:{type:Object,default:function(){return{}}},currentEdit:{type:Object,default:function(){return{}}},enumData:{type:Object,default:function(){return{}}}},components:{name:N,nameEn:M,batch:X,semester:et,wish:ot},data:function(){return{defaultInsertContents:[{insertType:"info",type:"name",label:{CH:"中文姓名",EN:"Full name in chinese"},des:{},setting:{width:"col-md-12"}},{insertType:"info",type:"name_en",label:{CH:"英文姓名",EN:"Full name in english"},des:{},setting:{showWidth:!1,placeholder:{first:{CH:"first",EN:"first"},middle:{CH:"middle",EN:"middle"},last:{CH:"last/family",EN:"last/family"}}}},{insertType:"defaultItem",type:"batch",label:{CH:"梯次選項",EN:"batch"},des:{CH:"請選擇您想參加的觀摩研習梯次",EN:"Number of the original agency"},setting:{require:!0,removeable:!1,showWidth:!1},datas:[{label:{CH:"客製化班"},options:[{label:{CH:"第 1 梯 (菲律賓地區)  ( 5/20-6/2）"},uuid:"5e4f95ba-fe82-41ea-bf8c-8c7cebd0b849"},{label:{CH:"第 2 梯 (越南地區) （6/15-6/28）"},uuid:"f8ccb4d7-9e7d-4e0e-8d31-34860f9a2120"},{label:{CH:"第 3 梯 (越南地區)  ( 6/30-7/28）"},uuid:"6da8d6b0-b734-48c8-a394-97c7b869e50f"}]},{label:{CH:"個人班"},options:[{label:{CH:"第 4 梯 (菲律賓地區)  ( 5/20-6/2）"},uuid:"528576e2-8949-4a8d-99df-05cb6e8869a9"},{label:{CH:"第 6 梯 (越南地區)  ( 6/30-7/28）"},uuid:"7cfe030f-5f95-428f-aaac-7f7ceec0924b"},{label:{CH:"第 5 梯 (越南地區) （6/15-6/28）"},uuid:"7ff1b360-073e-4cf4-b789-70729067ad36"}]}]},{insertType:"defaultItem",type:"semester",label:{CH:"學期志願選項",EN:"semester"},des:{CH:"請勾選想參加的期間，並輸入您希望的日期，輸入後再選擇該學期的學校志願。",EN:"Number of the original agency"},setting:{require:!0,limit:3,showDes:!1,removeable:!1,showWidth:!1},semester:[{label:{CH:"110 年第 1 學期"},startDate:"2021-09-01",endDate:"2022-01-30",uuid:"11877192-b33d-4b86-81cb-c2192981a7c6"},{label:{CH:"110 年第 2 學期"},startDate:"2022-02-01",endDate:"2022-07-30",uuid:"0b8ea822-6a68-4169-bfec-c0d0048e8679"}],school:[{name:{CH:"大安國小"},cityId:"1"},{name:{CH:"龍門國小"},cityId:"2"}]},{insertType:"defaultItem",type:"wish",label:{CH:"活動地點 志願排序",EN:"wish"},des:{CH:"※注意事項： \n1. 請以「1～32」填寫志願排序，交件後不得要求變更。 \n2. 請全部填滿，如未填滿可能導致高分成績但無法分發。",EN:"Number of the original agency"},setting:{require:!0,limit:32,removeable:!1,showWidth:!1},wish:[{name:{CH:"日本東京"},areaId:"0003_1"},{name:{CH:"日本大阪"},areaId:"0003_1"}]}]}}},ct=lt,dt=Object(p["a"])(ct,k,E,!1,null,null,null),ut=dt.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("label",[t._v("選項")]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:t.openOptionModal}},[t._v("選項管理")])]),a("div",{staticClass:"modal fade",attrs:{id:"optionModal"}},[a("div",{staticClass:"modal-dialog modal-lg modal-dialog-centered"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"editor_options-wrap"},t._l(t.currentEdit.options,(function(e,i){return a("div",{key:"選項"+i,staticClass:"options-item"},[a("div",{staticClass:"options-hd"},[a("span",{staticClass:"sort"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"option.value"}],staticClass:"form-control form-control-sm",domProps:{value:e.value},on:{change:t.editOptionValue,input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}})]),a("span",{staticClass:"additional"},["radio"==t.currentEdit.type||"checkbox"==t.currentEdit.type?a("div",{staticClass:"custom-control form-check form-inline pl-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.des,expression:"option.des"}],staticClass:"form-check-input",attrs:{id:"options_des_"+i,type:"checkbox"},domProps:{checked:Array.isArray(e.des)?t._i(e.des,null)>-1:e.des},on:{change:[function(a){var i=e.des,s=a.target,n=!!s.checked;if(Array.isArray(i)){var r=null,o=t._i(i,r);s.checked?o<0&&t.$set(e,"des",i.concat([r])):o>-1&&t.$set(e,"des",i.slice(0,o).concat(i.slice(o+1)))}else t.$set(e,"des",n)},t.checkInline]}}),a("label",{staticClass:"form-check-label",attrs:{for:"options_des_"+i}},[t._v("額外輸入")])]):t._e()]),a("span",{staticClass:"action"},[a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:0==i},on:{click:function(e){return t.$upOption(t.currentEdit.options,i)}}},[a("i",{staticClass:"fa fa-chevron-up"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button",disabled:i==t.currentEdit.options.length-1},on:{click:function(e){return t.$downOption(t.currentEdit.options,i)}}},[a("i",{staticClass:"fa fa-chevron-down"})]),a("button",{staticClass:"btn btn-xs btn-default waves-effect waves-light",attrs:{title:"","data-toggle":"tooltip",type:"button"},on:{click:function(e){return t.$removeOption(t.currentEdit.options,i)}}},[a("i",{staticClass:"fa fa-times"})])])])]),a("div",{staticClass:"options-bd"},[t._l(t.langs,(function(s){return a("div",{key:"選項內容"+i+"-"+s.key,staticClass:"language-item"},[a("label",{attrs:{for:"選項內容"+i+"-"+s.key}},[t._v(t._s(s.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.label[s.key],expression:"option.label[lang.key]"}],staticClass:"form-control form-control-sm",attrs:{id:"選項內容"+i+"-"+s.key},domProps:{value:e.label[s.key]},on:{input:function(a){a.target.composing||t.$set(e.label,s.key,a.target.value)}}})])})),1!=e.des||"radio"!=t.currentEdit.type&&"checkbox"!=t.currentEdit.type?t._e():a("div",{staticClass:"additional-block"},[a("h6",[t._v("額外輸入")]),t._l(t.langs,(function(s){return a("div",{key:"欄位提示"+i+"-"+s.key,staticClass:"language-item"},[a("label",{attrs:{for:"欄位提示"+i+"-"+s.key}},[t._v(t._s(s.label))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.placeholder[s.key],expression:"option.placeholder[lang.key]"}],staticClass:"form-control form-control-sm",attrs:{id:"欄位提示"+i+"-"+s.key},domProps:{value:e.placeholder[s.key]},on:{input:function(a){a.target.composing||t.$set(e.placeholder,s.key,a.target.value)}}})])}))],2)],2)])})),0),a("button",{staticClass:"ml-0 btn btn-default btn-sm waves-effect waves-light",attrs:{"data-toggle":"tooltip",type:"button"},on:{click:t.addOption}},[t._v("新增項目")])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:function(e){return t.$closeModal("option")}}},[t._v("關閉")])])])])])])},pt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("選項管理")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("×")])])}],ft={name:"table_options",props:["currentEdit","langs"],mounted:function(){},methods:{addOption:function(){"radio"==this.currentEdit.type||"checkbox"==this.currentEdit.type?this.currentEdit.options.push({value:"",label:{},placeholder:{CH:""}}):this.currentEdit.options.push({value:"",label:{}})},editOptionValue:function(){try{this.checkValue(this.currentEdit.options)}catch(t){return void toastr["error"]("Error",t.message)}},checkValue:function(t){if(t&&t.length>0&&new Set(t.map((function(t){return t.value.toString()}))).size<t.length)throw new Error("索引不可重複")},checkInline:function(){var t=this,e=this.currentEdit.options.some((function(e){if(e.des)return t.currentEdit.setting.inline=!1,!0}));!e&&this.currentEdit.setting.inline&&(this.currentEdit.setting.inline=!0)},openOptionModal:function(){$("#optionModal").appendTo("body").modal("show")}}},vt=ft,ht=Object(p["a"])(vt,mt,pt,!1,null,null,null),bt=ht.exports,gt={name:"form_editor",components:{editor:r["a"],draggable:l.a,datepicker:v,datetimepicker:_,customComponents:ut,displayInline:V,tableOptions:bt},data:function(){return{cbData:{dev:!1,fieldName:!1},enumData:{langs:[],rules:[],settings:[]},i18n:"CH",contentType:"insert",searchWords:"",currentEdit:{},currentDivIndex:"",currentItemIndex:"",editDiv:!1,rulesEdit:{key:"",value:"",message:{}},rulesInit:{key:"",value:"",message:{}},rulesEditIndex:"",insertTypeList:[{label:"全部",value:""},{label:"基本欄位",value:"default"},{label:"報名人基本資料",value:"info"},{label:"僑務資訊系統欄位",value:"custom"}],insertType:"",defaultInsertContents:[{insertType:"default",type:"des",label:{CH:"說明文字"},content:{CH:"說明文字"},setting:{showDes:!1,width:"col-md-12"},insertDes:"編輯器說明文字"},{insertType:"default",type:"text",label:{CH:"單行文字",EN:"input"},des:{},value:{},setting:{width:"col-md-12",placeholder:{}},rules:[],insertDes:"單行 input"},{insertType:"default",type:"textarea",label:{CH:"多行文字",EN:"textarea"},des:{},value:{},setting:{width:"col-md-12",placeholder:{}},insertDes:"多行 textarea"},{insertType:"default",type:"email",label:{CH:"電子郵件",EN:"email"},des:{},value:{},setting:{width:"col-md-12",placeholder:{}},insertDes:"自帶 email 檢查"},{insertType:"default",type:"number",label:{CH:"數字",EN:"number"},des:{},setting:{width:"col-md-12",step:"0",placeholder:{}},insertDes:"自帶數字檢查"},{insertType:"default",type:"datepicker",label:{CH:"日期",EN:"datepicker"},des:{},setting:{width:"col-md-12",placeholder:{CH:"選擇日期",EN:"select date"}},rules:[],insertDes:"日期"},{insertType:"default",type:"datetimepicker",label:{CH:"日期時間",EN:"datetimepicker"},des:{},setting:{width:"col-md-12",placeholder:{CH:"選擇日期時間",EN:"select datetime"}},rules:[],insertDes:"日期及時間"},{insertType:"default",type:"select",label:{CH:"下拉選項",EN:"select"},des:{},options:[],setting:{showWidth:!1},insertDes:"可新增下拉項目 select"},{insertType:"default",type:"radio",label:{CH:"單選項目",EN:"radio"},des:{},options:[{value:1,label:{CH:"選項一"},placeholder:{CH:""}},{value:2,label:{CH:"選項二"},placeholder:{CH:""}}],setting:{showWidth:!1,inline:!0},insertDes:"可新增單選項目 radio"},{insertType:"default",type:"checkbox",label:{CH:"複選項目",EN:"checkbox"},des:{},options:[{value:1,label:{CH:"選項一"},placeholder:{CH:""}},{value:2,label:{CH:"選項二"},placeholder:{CH:""}},{value:3,label:{CH:"其他"},des:!0,placeholder:{CH:""}}],setting:{showWidth:!1,inline:!0},insertDes:"可新增複選項目 checkbox"},{insertType:"default",type:"file_upload",label:{CH:"檔案上傳",EN:"file input"},des:{},setting:{accept:[]},file:"",insertDes:"可限制上傳格式，顯示範例"},{insertType:"default",type:"file_download",label:{CH:"檔案下載",EN:"file download"},des:{},setting:{showWidth:!1,showDes:!1},file:"",insertDes:"點選下載檔案"}],defaultEditContents:[],defaultContents:[{label:{},items:[{type:"text",label:{},setting:{}}]}],confirm:{title:"",msg:""},toastrOptions:{closeButton:!0,debug:!1,positionClass:"md-toast-top-center",onclick:null,showDuration:"1000",hideDuration:"1000",timeOut:"10000",extendedTimeOut:"3000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"}}},computed:{allContents:function(){var t=[];return this.defaultContents.forEach((function(e){t=t.concat(e.items)})),t},defaultItems:function(){return this.defaultInsertContents.filter((function(t){return"defaultItem"==t.insertType}))},hideDefalutItemInsertContents:function(){var t=this;return this.defaultInsertContents.filter((function(e){return!!t.cbData.dev||"defaultItem"!=e.insertType}))},checkAddInsertContents:function(){var t=this;return this.hideDefalutItemInsertContents.map((function(e){return e.addable=!0,t.allContents.forEach((function(t){t.type==e.type&&"default"!=e.insertType&&(e.addable=!1)})),e}))},filterInsertContents:function(){var t=this;return this.checkAddInsertContents.filter((function(e){return e.label.CH.match(t.searchWords)})).filter((function(e){return!t.insertType||e.insertType==t.insertType}))},checkAddEditContents:function(){var t=this,e=[];return this.defaultEditContents.forEach((function(t){e=e.concat(t.items)})),e.map((function(e){return e.addable=!0,t.allContents.forEach((function(t){t.uuid==e.uuid&&(e.addable=!1)})),e}))},filterEditContents:function(){var t=this;return this.checkAddEditContents.filter((function(e){return e.label.CH.match(t.searchWords)})).filter((function(e){return!t.insertType||e.insertType==t.insertType}))},rulesTypeArray:function(){return this.enumData.rules.map((function(t){return t.type}))},rulesInType:function(){var t=this;return this.enumData.rules.filter((function(e){return e.type==t.currentEdit.type||""==e.type}))},filterSettings:function(){var t=this;return this.enumData.settings.filter((function(e){return"file_upload"!=t.currentEdit.type||"require"==e.key||"invisiable"==e.key}))}},mounted:function(){toastr.options=this.toastrOptions;var t=document.querySelector("#cbdata");this.cbData=JSON.parse(t.dataset.cbdata),this.defaultInsertContents=this.defaultInsertContents.concat(this.$refs.customComponents[0].defaultInsertContents),this.getContent(),this.cbData.exampleId&&this.getEditContent()},methods:{removeAt:function(t,e){var a=this,i=function(){void 0!=e?a.defaultContents[t].items.splice(e,1):a.defaultContents.splice(t,1),a.currentEdit={}};this.$confirm("提示","是否確定刪除?",i)},log:function(t){console.log("log",t)},onDragStart:function(t){t.target.classList.add("grabbing")},onDragEnd:function(t){t.target.classList.remove("grabbing")},onAdd:function(t,e){this.closeEdit();var a=this.defaultContents[t].items[e.newIndex];a.uuid||this.$set(a,"uuid",this.$uuid()),this.editContent(a,t,e.newIndex)},onClone:function(t){return JSON.parse(JSON.stringify(t))},editContent:function(t,e,a){try{this.checkValue(this.currentEdit.options)}catch(i){return void toastr["error"]("Error",i.message)}this.closeEdit(),void 0!=e?void 0!=this.defaultContents[e].items[a]&&(this.editDiv=!1,this.$set(this.defaultContents[e].items[a],"editorEnable",!0),this.currentDivIndex=e,this.currentItemIndex=a,this.currentEdit=t):(this.editDiv=!0,this.currentEdit=t)},closeEdit:function(){var t=this;this.defaultContents.forEach((function(e,a){t.defaultContents[a].items.forEach((function(e,i){t.$set(t.defaultContents[a].items[i],"editorEnable",!1)}))}))},addDIV:function(){this.defaultContents.push({label:{CH:"名稱",EN:"DIV"},des:{},items:[]})},changeI18n:function(t){this.i18n=t},changeContnet:function(t){this.contentType=t},uploadFile:function(t){var e=this,a=new FormData;a.append("uid",this.cbData.uid),a.append("file",t.target.files[0]),fetch(this.cbData.uploadApi,{method:"POST",body:a}).then((function(t){return t.json()})).catch((function(t){toastr["error"]("Error",t)})).then((function(t){t.success?e.currentEdit.file=t.url:toastr["error"]("Error",t.message)}))},downloadFile:function(t){window.open(t)},checkInline:function(){var t=this,e=this.currentEdit.options.some((function(e){if(e.des)return t.currentEdit.setting.inline=!1,!0}));!e&&this.currentEdit.setting.inline&&(this.currentEdit.setting.inline=!0)},saveEditor:function(){var t=this;try{this.defaultContents.forEach((function(e){e.items.forEach((function(e){t.checkValue(e.options)}))}))}catch(a){return void toastr["error"]("Error",a.message)}var e=new FormData;e.append("uid",this.cbData.uid),e.append("formId",this.cbData.formId),e.append("data",JSON.stringify(this.defaultContents)),fetch(this.cbData.api,{method:"POST",body:e}).then((function(t){return t.json()})).catch((function(t){toastr["error"]("Error",t)})).then((function(t){t.success?toastr["success"]("Success","儲存成功"):toastr["error"]("Error",t.message)}))},getContent:function(){var t=this;fetch(this.cbData.api+"uid/".concat(this.cbData.uid,"/formId/").concat(this.cbData.formId)).then((function(t){return t.json()})).catch((function(t){toastr["error"]("Error",t)})).then((function(e){t.enumData=e.enumData,t.unshiftDefaultEvt(e.data)}))},getEditContent:function(){var t=this;fetch(this.cbData.api+"uid/".concat(this.cbData.uid,"/formId/").concat(this.cbData.exampleId)).then((function(t){return t.json()})).catch((function(t){toastr["error"]("Error",t)})).then((function(e){t.enumData=e.enumData,t.defaultEditContents=e.data}))},unshiftDefaultEvt:function(t){var e,a,i=this,s=this.cbData.default,n=[];Array.isArray(s)&&(a=this.defaultItems.filter((function(t){return!s.includes(t.type)})),a.forEach((function(t){n.push(t.type)})),t.forEach((function(e,a){t[a]["items"]=e.items.filter((function(t){return!n.includes(t.type)}))})),t.forEach((function(t){s=s.filter((function(e){var a=!0;return t.items.forEach((function(t){t.type==e&&(a=!1)})),a}))}))),Array.isArray(s)&&s.length>0&&(e=this.defaultItems.filter((function(t){return s.includes(t.type)})),t.unshift({label:{CH:"系統產生",EN:""},des:{},items:e})),this.defaultContents=t,Array.isArray(s)&&s.length>0&&(this.closeEdit(),e.forEach((function(t,e){t.uuid||i.$set(t,"uuid",i.$uuid()),i.editContent(t,0,e)})))},checkValue:function(t){if(t&&t.length>0&&new Set(t.map((function(t){return t.value.toString()}))).size<t.length)throw new Error("索引不可重複")},checkDivRemoveAble:function(t){return t.every((function(t){return"undefined"==typeof t.setting||0!=t.setting.removeable}))}}},yt=gt,Ct=(a("54b1"),Object(p["a"])(yt,s,n,!1,null,null,null)),_t=Ct.exports;i["a"].config.productionTip=!1,i["a"].prototype.$renderFunction=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";setTimeout((function(){var i=t.find((function(t){return t[a]==e}));return i}),1)},i["a"].prototype.$editModal=function(t,e,a){this["".concat(t,"EditIndex")]=a,this["".concat(t,"Edit")]="new"==a?JSON.parse(JSON.stringify(e)):JSON.parse(JSON.stringify(this.currentEdit[t][a])),$("#".concat(t,"Modal")).appendTo("body").modal("show")},i["a"].prototype.$saveModal=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this["".concat(t,"Edit")];"new"==this["".concat(t,"EditIndex")]?(e&&(a=Object.assign(a,{uuid:this.$uuid()})),this.currentEdit[t].push(a)):this.currentEdit[t][this["".concat(t,"EditIndex")]]=a;var i=this["".concat(t,"Init")];this.$closeModal(t,i)},i["a"].prototype.$closeModal=function(t,e){e&&(this["".concat(t,"Edit")]=Object.assign({},e)),$("#".concat(t,"Modal")).modal("hide")},i["a"].prototype.$removeOption=function(t,e){t.splice(e,1)},i["a"].prototype.$upOption=function(t,e){t[e]=t.splice(e-1,1,t[e])[0]},i["a"].prototype.$downOption=function(t,e){t[e]=t.splice(e+1,1,t[e])[0]},i["a"].prototype.$confirm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"提示",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"確認刪除?",a=arguments.length>2?arguments[2]:void 0;$("#confirmModal").appendTo("body").modal("show");var i=function(){a&&a(),$("#confirmModal").modal("hide")};this.confirm={title:t,msg:e,thenCB:i}},i["a"].prototype.$uuid=function(){var t=Date.now();return"undefined"!==typeof performance&&"function"===typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var a=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?a:3&a|8).toString(16)}))},new i["a"]({render:function(t){var e=t(_t),a=document.querySelector("#form_editor"),i=t("span",{attrs:{id:"cbdata","data-cbdata":a.dataset.cbdata}});return t("div",[e,i])}}).$mount("#form_editor")}});
//# sourceMappingURL=formEditor.js.map