<!-- template: 訪人物 - 單篇 -->

<%= render :partial => "/partials/breadcrumb" %>

<main class="main">

    <div class="main-head">
        <div class="main-container">
            <div class="interview-head">
                <div class="interview-cover">
                    
                    <!-- 專訪封面為正方形，最小解析度請註明 960 x 960 -->
                    <img src="../assets/default_interview.jpg" class="img-cover" alt="{圖片說明}">
                </div>
                <div class="interview-info">
                    <div class="info-hd">
                        <h3 class="interview-title">改變的方向一專訪國家教育研究院林崇熙院長</h3>
                        <span class="pt-1">
                            <ul class="menu-item action-options">
                                <li>
                                    <a title="分享" class="btn-action btn-share"><i class="fas fa-share-alt"></i></a>
                                    <div class="social-share">
                                        <a href="#" class="item-social" title="{連結名稱}"><i class="fab fa-facebook-f"></i></a>
                                        <a href="#" class="item-social" title="{連結名稱}"><i class="fab fa-line"></i></a>
                                        <a href="#" class="item-social" title="{連結名稱}"><i class="fab fa-twitter"></i></a>
                                        <a href="#" class="item-social" title="{連結名稱}"><i class="fas fa-envelope"></i></a>
                                    </div>
                                </li>
                                <li><a href="#" title="列印" class="btn-action"><i class="fas fa-print"></i></a></li>
                            </ul>
                        </span>
                    </div>
                    <div class="info-detail">
                        <div class="detail-item">
                            <span class="label">日期</span>
                            <span class="output">2023-12-02 (六)</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">受訪者</span>
                            <span class="output">國家教育研究院林崇熙院長</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">主持人</span>
                            <span class="output">
                                <span>林明佳</span>
                                <span>彼得潘</span>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="main-container">
        
        <audio preload="auto" controls>
            <source src="https://file-examples.com/storage/fe1dbaea7664d369bb6e226/2017/11/file_example_MP3_2MG.mp3">
        </audio>
        
        <div class="biography-wrapper">
            <div class="bio-inner">
                <h6 class="bio-title">受訪者簡介</h6>
                <div class="biography-item">
                    <div class="character-cover">
                        <img src="https://placekeanu.com/960/960/" class="img-cover" alt="{圖片說明}">
                    </div>
                    <div class="character-info">
                        <h5 class="fw-medium">國家教育研究院林崇熙院長</h5>
                        <div class="biography-brief">
                            <%= zh_lorem_paragraphs(3) %>
                        </div>
                        <a class="btn-ellipsis" title="展開">MORE <i class="fas fa-angle-down"></i></a>
                    </div>
                </div>
            </div>
            <div class="bio-inner">
                <h6 class="bio-title">主持人簡介</h6>
                <div class="biography-item">
                    <div class="character-cover">
                        <img src="http://placebeard.it/960/960" class="img-cover" alt="{圖片說明}">
                    </div>
                    <div class="character-info">
                        <h5 class="fw-medium">林明佳</h5>
                        <div class="biography-brief">
                            <%= zh_lorem_paragraph %>
                        </div>
                        <a class="btn-ellipsis" title="展開">MORE <i class="fas fa-angle-down"></i></a>
                    </div>
                </div>
                <div class="biography-item">
                    <div class="character-cover">
                        <img src="http://placebeard.it/640/640" class="img-cover" alt="{圖片說明}">
                    </div>
                    <div class="character-info">
                        <h5 class="fw-medium">彼得潘</h5>
                        <div class="biography-brief">
                            <%= zh_lorem_paragraphs(3) %>
                        </div>
                        <a class="btn-ellipsis" title="展開">MORE <i class="fas fa-angle-down"></i></a>
                    </div>
                </div>
            </div>
        </div>
        
        <article class="article interview-article">
            <h3><%= zh_lorem_sentence %></h3>
            <p><%= zh_lorem_paragraphs(3) %></p>
            <h3><%= zh_lorem_sentence %></h3>
            <p><%= zh_lorem_paragraphs(3) %></p>
            <p><%= zh_lorem_paragraph %></p>
            <h3><%= zh_lorem_sentence %></h3>
            <p><%= zh_lorem_paragraphs(3) %></p>
            <div class="creativecommons-wrap">
                <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="創用 CC 授權條款" style="border-width: 0;" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
                <span>本著作係採用<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">創用 CC 姓名標示 4.0 國際 授權條款</a>授權.</span>
            </div>
        </article>

        <div class="related-wrapper">
            <div class="related-topics related-link">
                <span class="topics-label">相關連結</span>
                <div class="topics-bd">
                    <ul class="menu-item menu-link">
                        <li>
                            <a href="#" title="{連結名稱}">學生在數學素養導向試題的表現</a>
                        </li>
                        <li>
                            <a href="#" title="{連結名稱}">新課綱系統影響力與社會設計對話暨閉幕式</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        
        <section class="media-section">
            <div class="section-title">
                <span>花絮</span>
            </div>
            <ul class="menu-item photo-gallery">
                <% (1..2).map do |i| %>
                <li>
                    <a href="https://placekitten.com/1900/1200" data-lightbox="example-gallery" class="gallery-link" data-title="{圖片描述}">
                        <img src="https://placekitten.com/1900/1200" alt="{圖片描述}" />
                    </a>
                </li>
                <li>
                    <a href="http://placebeard.it/900/1600" data-lightbox="example-gallery" class="gallery-link" data-title="{圖片描述}">
                        <img src="http://placebeard.it/900/1600" alt="{圖片描述}" />
                    </a>
                </li>
                <li>
                    <a href="https://placekeanu.com/800/450" data-lightbox="example-gallery" class="gallery-link" data-title="{圖片描述}">
                        <img src="https://placekeanu.com/800/450" alt="{圖片描述}" />
                    </a>
                </li>
                <li>
                    <a href="https://placekitten.com/1800/1450" data-lightbox="example-gallery" class="gallery-link" data-title="{圖片描述}">
                        <img src="https://placekitten.com/1800/1450" alt="{圖片描述}" />
                    </a>
                </li>
                <li>
                    <a href="https://placekeanu.com/800/1200" data-lightbox="example-gallery" class="gallery-link" data-title="{圖片描述}">
                        <img src="https://placekeanu.com/800/1200" alt="{圖片描述}" />
                    </a>
                </li>
                <% end %>
            </ul>
        </section>
        
        <div class="link-control">
            <a href="#" class="link-more link-back" title="回專區首頁"><span>回專區首頁</span></a>
        </div>
    </div>
    
    
</main>


<% content_for :js do %>

<!-- 分享按鈕 -->
<script>
  // 取得所有帶有 .item-social 這個 CSS 類別的按鈕元素
  const buttons = document.querySelectorAll('.btn-share');

  // 針對每個按鈕設置 click 事件監聽器
  buttons.forEach((button) => {
    button.addEventListener('click', () => {
      // 切換 .active 這個 CSS 類別
      button.classList.toggle('active');
    });
  });
</script>

<!-- Gallery 正方形 -->
<script>
  // 獲取所有的 .gallery-link 元素
  const galleryLinks = document.querySelectorAll('.gallery-link');

  // 監聽視窗大小變化事件
  window.addEventListener('resize', () => {
    // 遍歷所有的 .gallery-link 元素
    galleryLinks.forEach((link) => {
      // 獲取 .gallery-link 元素的寬度
      const width = link.offsetWidth;
      // 將寬度值設定為 .gallery-link 的內嵌樣式
      link.style.cssText = `width: ${width}px; height: ${width}px;`;
    });
  });

  // 頁面載入完成時觸發一次，以初始化 .gallery-link 寬度
  window.addEventListener('load', () => {
    // 觸發視窗大小變化事件，進行初始化
    window.dispatchEvent(new Event('resize'));
  });
</script>

<!-- Lightbox2 -->
<script src="../javascripts/lightbox.min.js"></script>
<script>
    lightbox.option({
      'resizeDuration': 300
    })
</script>

<!-- AudioPlayer -->
<script src="../javascripts/audioplayer.js"></script>
<script>
    $(function() {
        $('audio').audioPlayer();
    });
</script>

<!-- 省略 -->
<script>
// 獲取所有 .biography-item 容器元素
const biographyItems = document.querySelectorAll(".biography-item");

// 迭代每個 .biography-item 容器元素，添加事件處理程序
biographyItems.forEach((item) => {
    const btnEllipsis = item.querySelector(".btn-ellipsis");
    const biographyBrief = item.querySelector(".biography-brief");
    const icon = btnEllipsis.querySelector("i");

    // 判斷文字是否超過四行
    const isMobile = window.innerWidth < 575;
    const maxLines = isMobile ? 2 : 4;

    if (biographyBrief.scrollHeight > maxLines * parseFloat(getComputedStyle(biographyBrief).lineHeight)) {
        btnEllipsis.style.display = "block";
        biographyBrief.style.display = "-webkit-box";
    } else {
        btnEllipsis.style.display = "none";
    }

    // 監聽 .btn-ellipsis 的 click 事件
    btnEllipsis.addEventListener("click", () => {
        // 切換 .biography-brief 的 display 屬性
        if (biographyBrief.style.display === "-webkit-box") {
            biographyBrief.style.display = "block";
            icon.style.transform = "rotate(180deg)";
            btnEllipsis.title = "收合";
        } else {
            biographyBrief.style.display = "-webkit-box";
            icon.style.transform = "rotate(0deg)";
            btnEllipsis.title = "展開";
        }
    });
});
</script>


<% end %>

